<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>SciSDK Library: OpenDPP Board Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://bryce.io/gitlab-corners/ -->
<style>
    .gitlab-corner-wrapper {
        overflow: hidden;
        width: 100px;
        height: 100px;
        position: absolute;
        top: 0;
        right: 0
    }
    .gitlab-corner {
        position: absolute;
        top: -16px;
        right: -50px;
        transform: rotate(45deg);
        background: #548;
        border: 44px solid #548;
        border-bottom: none;
        border-top: #548 solid 16px
    }
    .gitlab-corner svg {
        width: 60px;
        height: 60px;
        margin-bottom: -4px
    }
    .cls-1 {
        fill: #fc6d26
    }
    .cls-2 {
        fill: #e24329
    }
    .cls-3 {
        fill: #fca326
    }
    .gitlab-corner:hover .cls-1 {
        animation: cycle .6s
    }
    .gitlab-corner:hover .cls-2 {
        animation: cycleMid .6s
    }
    .gitlab-corner:hover .cls-3 {
        animation: cycleEnd .6s
    }
    @keyframes cycle {
        100%,
        15%,
        60% {
            fill: #fc6d26
        }
        30%,
        75% {
            fill: #e24329
        }
        45%,
        90% {
            fill: #fca326
        }
    }
    @keyframes cycleMid {
        100%,
        15%,
        60% {
            fill: #e24329
        }
        30%,
        75% {
            fill: #fca326
        }
        45%,
        90% {
            fill: #fc6d26
        }
    }
    @keyframes cycleEnd {
        100%,
        15%,
        60% {
            fill: #fca326
        }
        30%,
        75% {
            fill: #fc6d26
        }
        45%,
        90% {
            fill: #e24329
        }
    }
    @media (max-width:500px) {
        .gitlab-corner:hover .cls-1,
        .gitlab-corner:hover .cls-2,
        .gitlab-corner:hover .cls-3 {
            animation: none
        }
        .gitlab-corner .cls-1 {
            animation: cycle .6s
        }
        .gitlab-corner .cls-2 {
            animation: cycleMid .6s
        }
        .gitlab-corner .cls-3 {
            animation: cycleEnd .6s
        }
    }
</style>
<div class="gitlab-corner-wrapper"><a href="https://gitlab.sci-compiler.com/sdk/sci-sdk" class="gitlab-corner"
        aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 586 559">
            <g id="g44">
                <path id="path46" class="cls-1"
                    d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39" />
            </g>
            <g id="g48">
                <path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z" />
            </g>
            <g id="g56">
                <path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z" />
            </g>
            <g id="g64">
                <path id="path66" class="cls-3"
                    d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z" />
            </g>
            <g id="g72">
                <path id="path74" class="cls-2"
                    d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z" />
            </g>
            <g id="g76">
                <path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z" />
            </g>
            <g id="g80">
                <path id="path82" class="cls-3"
                    d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z" />
            </g>
            <g id="g84">
                <path id="path86" class="cls-2"
                    d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z" />
            </g>
        </svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sci-compiler-logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SciSDK Library
   </div>
   <div id="projectbrief">SDK for Sci-Compiler projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2boards_2opendpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">OpenDPP Board Driver</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md277"></a> Caen board uses a custom endpoint to readout data with the host using accelerated DMA transfers and DDR4 memory. This driver is compatible with the following boards:</p><ul>
<li>V2740</li>
<li>DT2740</li>
<li>V2745</li>
<li>DT2745</li>
<li>VX2730</li>
<li>DT2730</li>
</ul>
<p>The Sci-Compiler project must be created as DPP project. Scope firmware uses the OpenScope driver.</p>
<h1><a class="anchor" id="autotoc_md278"></a>
Access to board endpoints</h1>
<p>Refere to the Board endpoint driver documentation to understand how to configure and read board specific parameters.</p>
<p>Each board has a specific API set to configure framework paramenters that are outside the scope of Sci-Compiler project. This board parameters are accessible through the following path:</p>
<p><code>board0:/boardapi/</code></p>
<p>This path is a virtual path that is mapped to the board specific framework control endpoint. All read/write operations are performed directly to the board SDK and it is managed by the SDK.</p>
<p>For FELib compatible board (CAEN X274X) the board specific API is accessible through the following path:</p>
<p><code>board0:/boardapi/felib/</code></p>
<p>any path after the last <code>/</code> is mapped to the board specific SDK. For example:</p>
<p><code>board0:/boardapi/felib/ch/0/par/ChEnable</code></p>
<p>ask to the FELib SDK to set/read the <code>ChEnable</code> parameter of the channel 0.</p>
<p>The documentation of the board specific API is available in the <a href="https://www.caen.it/products/caen-felib-library/">board SDK documentation</a></p>
<p><b>Data type in SetParameter must be STRING, indeed just the SCISDK_SetParameterString function is supported because the felib requires all parameters to be a string.</b></p>
<h1><a class="anchor" id="autotoc_md279"></a>
OpenDPP data structure</h1>
<p>The OpenDPP driver uses a custom data structure to store the data readout from the board. Aldo the documentation of felib explain that the user may customize which field are stored in the data structure, the OpenDPP driver uses the following fixed structure:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">        uint8_t channel;</div>
<div class="line">        uint64_t timestamp;</div>
<div class="line">        uint64_t timestamp_ns;</div>
<div class="line">        uint16_t fine_timestamp;</div>
<div class="line">        uint16_t energy;</div>
<div class="line">        uint16_t flags_b;</div>
<div class="line">        uint8_t flags_a;</div>
<div class="line">        uint16_t psd;</div>
<div class="line">        uint64_t* user_info;</div>
<div class="line">        uint32_t user_info_size;</div>
<div class="line">        <span class="keywordtype">bool</span> truncated;</div>
<div class="line">        uint16_t* waveform;</div>
<div class="line">        uint32_t waveform_size;</div>
<div class="line">        <span class="keywordtype">bool</span> board_fail;</div>
<div class="line">        <span class="keywordtype">bool</span> special_event;</div>
<div class="line">        uint32_t event_size;</div>
<div class="line">        <span class="keywordtype">bool</span> flush;</div>
<div class="line">        uint32_t aggregate_counter;</div>
<div class="line">    } <a class="code hl_struct" href="struct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t.html">SCISDK_FE_OPENDPP_EVENT</a>;</div>
<div class="ttc" id="astruct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t_html"><div class="ttname"><a href="struct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t.html">SCISDK_FE_OPENDPP_EVENT</a></div><div class="ttdoc">OpenDPP structure.</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:474</div></div>
</div><!-- fragment --><p><code>channel</code>: Channel (7 bits)</p>
<p><code>timestamp</code>: Timestamp (48 bits)</p>
<p><code>timestamp_ns</code>: Timestamp in nanoseconds (51 bits)</p>
<p><code>fine_timestamp</code>: Fine timestamp (10 bits)</p>
<p><code>energy</code>: Energy (16 bits)</p>
<p><code>flags_b</code>: Event low priority flags (12 bits). See Low Priority.</p>
<p><code>flags_a</code>: Event high priority flags (8 bits). See High Priority.</p>
<p><code>psd</code>: Pulse Shape Discrimination (16 bits)</p>
<p><code>user_info</code>: User Info word</p>
<p><code>user_info_size</code>: Number of User Info word</p>
<p><code>truncated</code>: Set if the event is truncated</p>
<p><code>waveform</code>: Waveform samples</p>
<p><code>waveform_size</code>: Number of waveform samples.</p>
<p><code>board_fail</code>: Set if the logical AND between of the ErrorFlag and ErrorFlagDataMask is not 0. Present in all the events</p>
<p><code>special_event</code>: Set if Special event</p>
<p><code>event_size</code>: Total event raw size, useful for statistics and to discriminate between compressed events (if == 8, see EnDataReduction) and standard events (if &gt; 8).</p>
<p><code>flush bool</code>: Flush of the aggregate word. Shared by all the events in the aggregate. Useful for debug purposes.</p>
<p><code>aggregate_counter</code>: Aggregate counter section in the Event Aggregate structure. Shared by all the events</p>
<p>Refer to the <a href="https://www.caen.it/products/caen-felib-library/">FELib documentation</a> for more information.</p>
<h1><a class="anchor" id="autotoc_md280"></a>
Run Control</h1>
<p>The digitizers must be armed before can start any acquisition:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> ret;</div>
<div class="line">ret = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/armacquisition&quot;</span>, _sdk);</div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a16a7364c71d331be2da443c61f7a25f3"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_ExecuteCommand(char *Path, char *value, void *handle)</div><div class="ttdoc">Execute a command for the specific Memory Mapped Component device driver/endpoint....</div></div>
</div><!-- fragment --><p> In case of start source is set to software start, this will start an acquisition run: </p><div class="fragment"><div class="line">ret = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/swstartacquisition&quot;</span>, _sdk_);</div>
</div><!-- fragment --><p> Similarly, to send a software stop and disarm the acquisition: </p><div class="fragment"><div class="line">ret = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/swstopacquisition&quot;</span>, _sdk);</div>
<div class="line">ret = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/disarmacquisition&quot;</span>, _sdk);</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md281"></a>
Read Data Loop</h1>
<p>To read data from the digitizer as soon as it becomes available, the easier approach is to implement a loop around the <code><a class="el" href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1" title="Read data from the board for the specific Memory Mapped Componet (oscilloscope, spectrum,...">SCISDK_ReadData()</a></code> function, as demonstrated in the provided demo.</p>
<p>If an event is already available in the endpoint, the function returns immediately with <code>NI_OK</code>. The main difference compared to the OpenScope framework is that, in this case, the event consists of information from only a single channel. If no events are available within 10 seconds, it returns <code>NI_TIMEOUT</code>. Once acquisition has stopped, any remaining data stored in the digitizer can still be read until the function returns <code>NI_LAST</code>, indicating that no more data is available from that acquisition session.</p>
<p>These return values can be used to build an efficient acquisition loop. The following code snippet illustrates this logic:</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div>
<div class="line">    ret = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a>(<span class="stringliteral">&quot;board0:/boardapi&quot;</span>, evnt, _sdk);</div>
<div class="line">    <span class="keywordflow">switch</span> (ret) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_define" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>:</div>
<div class="line">            <span class="comment">// Process the event data here, or proceed to the next read.</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_define" href="_n_i_error_code_8h.html#ab44d3b4fb5f18b8063b2e8e7299096f9">NI_TIMEOUT</a>:</div>
<div class="line">            <span class="comment">// No event was available within the timeout window.</span></div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code hl_define" href="_n_i_error_code_8h.html#a62591dd890151e37e85d9d91bc33515a">NI_LAST</a>:</div>
<div class="line">            printf(<span class="stringliteral">&quot;\nAcquisition complete. No more data available.\n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="a_n_i_error_code_8h_html_a62591dd890151e37e85d9d91bc33515a"><div class="ttname"><a href="_n_i_error_code_8h.html#a62591dd890151e37e85d9d91bc33515a">NI_LAST</a></div><div class="ttdeci">#define NI_LAST</div><div class="ttdef"><b>Definition</b> NIErrorCode.h:43</div></div>
<div class="ttc" id="a_n_i_error_code_8h_html_ab44d3b4fb5f18b8063b2e8e7299096f9"><div class="ttname"><a href="_n_i_error_code_8h.html#ab44d3b4fb5f18b8063b2e8e7299096f9">NI_TIMEOUT</a></div><div class="ttdeci">#define NI_TIMEOUT</div><div class="ttdef"><b>Definition</b> NIErrorCode.h:42</div></div>
<div class="ttc" id="a_n_i_error_code_8h_html_ae749d3c5e8d435a8bc05e47792d996d8"><div class="ttname"><a href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a></div><div class="ttdeci">#define NI_OK</div><div class="ttdef"><b>Definition</b> NIErrorCode.h:8</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_aeae6abf2d2a9a72799a64a3aa2d528c1"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_ReadData(char *Path, void *buffer, void *handle)</div><div class="ttdoc">Read data from the board for the specific Memory Mapped Componet (oscilloscope, spectrum,...</div></div>
</div><!-- fragment --><p> In case of success the function will return one event at the time.</p>
<h1><a class="anchor" id="autotoc_md282"></a>
Code Examples</h1>
<p>Configure the board to readout channel 0,1,2 and store the data in a csv file, trigger comes from Sci-Compiler trigger to each channel FIFO.</p>
<div class="fragment"><div class="line">++</div>
<div class="line">   <span class="keywordtype">void</span>* _sdk = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a491b12b67faeecd218d29c0031094092">SCISDK_InitLib</a>();</div>
<div class="line"> </div>
<div class="line">   uint32_t v;</div>
<div class="line">   <span class="keywordtype">string</span> test;</div>
<div class="line">   <span class="keywordtype">int</span> res = 0;</div>
<div class="line">   <span class="keywordtype">char</span>* ret;</div>
<div class="line">   <span class="keywordtype">bool</span> acq_status = <span class="keyword">true</span>;</div>
<div class="line">   std::ofstream out(<span class="stringliteral">&quot;c:/temp/output.csv&quot;</span>);</div>
<div class="line">   </div>
<div class="line">   out &lt;&lt; <span class="stringliteral">&quot;Ch  Timestamp&quot;</span> &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">   res = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a30c87ee142b0ba8afa0ad3e008903477">SCISDK_AddNewDevice</a>(<span class="stringliteral">&quot;10.105.250.18&quot;</span>, <span class="stringliteral">&quot;V2740&quot;</span>, <span class="stringliteral">&quot;C:/RegisterFile.json&quot;</span>, <span class="stringliteral">&quot;board0&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#ac9e9b4e1a5d91597095829bd13eafa30">SCISDK_s_error</a>(res, &amp;ret, _sdk);</div>
<div class="line">   <span class="keywordflow">if</span> (res) std::exit(ret);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/reset&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/readout.datatype&quot;</span>, <span class="stringliteral">&quot;dpp&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/TrgOutMode&quot;</span>, <span class="stringliteral">&quot;UserTrgout&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/ch/0..63/par/ChEnable&quot;</span>, <span class="stringliteral">&quot;false&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/ch/0/par/ChEnable&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/ch/1/par/ChEnable&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/ch/2/par/ChEnable&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>, _sdk);</div>
<div class="line">   </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/EnDataReduction&quot;</span>, <span class="stringliteral">&quot;true&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/TestPulsePeriod&quot;</span>, <span class="stringliteral">&quot;100000&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/TestPulseWidth&quot;</span>, <span class="stringliteral">&quot;1000&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/ITLAMask&quot;</span>, <span class="stringliteral">&quot;0x1&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/ITLAPairLogic&quot;</span>, <span class="stringliteral">&quot;None&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/ITLAMajorityLev&quot;</span>, <span class="stringliteral">&quot;0&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/ITLAMainLogic&quot;</span>, <span class="stringliteral">&quot;OR&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/ITLAGateWidth&quot;</span>, <span class="stringliteral">&quot;800&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/ITLAPolarity&quot;</span>, <span class="stringliteral">&quot;Direct&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/AcqTriggerSource&quot;</span>, <span class="stringliteral">&quot;ITLA&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/par/startsource&quot;</span>, <span class="stringliteral">&quot;SWcmd&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/armacquisition&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/swstartacquisition&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line">   <span class="comment">//let run the board for 1 sec</span></div>
<div class="line">   Sleep(1000);</div>
<div class="line">   <span class="comment">//disarm acquisition</span></div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/armacquisition&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/boardapi/felib/cmd/swstartacquisition&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_struct" href="struct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t.html">SCISDK_FE_OPENDPP_EVENT</a>* dpp_evnt;</div>
<div class="line"> </div>
<div class="line">   <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a>(<span class="stringliteral">&quot;board0:/boardapi&quot;</span>, <a class="code hl_enumvalue" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;dpp_evnt, _sdk);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">while</span> (acq_status) {</div>
<div class="line">       ret = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a>(<span class="stringliteral">&quot;board0:/boardapi&quot;</span>, dpp_evnt, _sdk);</div>
<div class="line">       <span class="keywordflow">switch</span> (ret) {</div>
<div class="line">           <span class="keywordflow">case</span> <a class="code hl_define" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>:</div>
<div class="line">               out &lt;&lt; (int)dpp_evnt-&gt;<a class="code hl_variable" href="struct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t.html#a32328f7663b7192d9bf24f3b33856930">channel</a> &lt;&lt; <span class="stringliteral">&quot;\t&quot;</span> &lt;&lt; std::hex &lt;&lt; dpp_evnt-&gt;<a class="code hl_variable" href="struct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t.html#afd6474e9ecc438c9af2a81ebe41ec20c">timestamp</a> &lt;&lt; endl;</div>
<div class="line">               <span class="comment">// Process the event data here, or proceed to the next read.</span></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">           <span class="keywordflow">case</span> <a class="code hl_define" href="_n_i_error_code_8h.html#ab44d3b4fb5f18b8063b2e8e7299096f9">NI_TIMEOUT</a>:</div>
<div class="line">               <span class="comment">// No event was available within the timeout window.</span></div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">           <span class="keywordflow">case</span> <a class="code hl_define" href="_n_i_error_code_8h.html#a62591dd890151e37e85d9d91bc33515a">NI_LAST</a>:</div>
<div class="line">               printf(<span class="stringliteral">&quot;\nAcquisition completed. No more data available.\n&quot;</span>);</div>
<div class="line">               acq_status = <span class="keyword">false</span>;</div>
<div class="line">               <span class="keywordflow">break</span>;</div>
<div class="line">           <span class="keywordflow">default</span>:</div>
<div class="line">               out &lt;&lt; <span class="stringliteral">&quot;Error during the acquisition\n&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">               out.close();</div>
<div class="line">               <span class="keywordflow">return</span> res;</div>
<div class="line">       }</div>
<div class="line">   }</div>
<div class="line">   out.close();</div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a00407547516aa0d9a26f273423366be3"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_SetParameterString(char *Path, char *value, void *handle)</div><div class="ttdoc">Set the value of a parameter for the specific Sci-Compiler Memory Mapped Component or route the value...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a30c87ee142b0ba8afa0ad3e008903477"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a30c87ee142b0ba8afa0ad3e008903477">SCISDK_AddNewDevice</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_AddNewDevice(char *DevicePath, char *DeviceModel, char *JSONFwFilePath, char *Name, void *handle)</div><div class="ttdoc">Connect to and hardware device. The function tries to connect to the device, decode the Sci-Compiler ...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a491b12b67faeecd218d29c0031094092"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a491b12b67faeecd218d29c0031094092">SCISDK_InitLib</a></div><div class="ttdeci">SCISDK_DLL_API void * SCISDK_InitLib()</div><div class="ttdoc">Initialize the SciSDK handles accolating the resources. This function must be called before any other...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_ac3f231d328ae4716a3d5910e00b44d7b"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_AllocateBuffer(char *Path, T_BUFFER_TYPE buffer_type, void **buffer, void *handle)</div><div class="ttdoc">Allocate a buffer to be used to store data from the board for the specific Memory Mapped Componet (os...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_ac9e9b4e1a5d91597095829bd13eafa30"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#ac9e9b4e1a5d91597095829bd13eafa30">SCISDK_s_error</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_s_error(int err_no, char **value, void *handle)</div><div class="ttdoc">Convert the returned error code in a human readable string explaining the error.</div></div>
<div class="ttc" id="ascisdk__defines_8h_html_ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d"><div class="ttname"><a href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a></div><div class="ttdeci">@ T_BUFFER_TYPE_DECODED</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:230</div></div>
<div class="ttc" id="astruct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t_html_a32328f7663b7192d9bf24f3b33856930"><div class="ttname"><a href="struct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t.html#a32328f7663b7192d9bf24f3b33856930">SCISDK_FE_OPENDPP_EVENT::channel</a></div><div class="ttdeci">uint8_t channel</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:475</div></div>
<div class="ttc" id="astruct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t_html_afd6474e9ecc438c9af2a81ebe41ec20c"><div class="ttname"><a href="struct_s_c_i_s_d_k___f_e___o_p_e_n_d_p_p___e_v_e_n_t.html#afd6474e9ecc438c9af2a81ebe41ec20c">SCISDK_FE_OPENDPP_EVENT::timestamp</a></div><div class="ttdeci">uint64_t timestamp</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:476</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
