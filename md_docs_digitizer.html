<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>SciSDK Library: Wave Digitizer driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://tholman.com/github-corners/ -->
<a href="https://github.com/NuclearInstruments/SCISDK" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sci-compiler-logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SciSDK Library
   </div>
   <div id="projectbrief">SDK for SciCompiler projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_docs_digitizer.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Wave Digitizer driver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Wave Digitizer componet has the function to acquire multiple channels capturing waveform from each one. It is similar to the oscilloscope, but, while the oscilloscope purpose is to monitor the internal process of the firmware, and indeed is not very fast in transfering data, digitizer function is optimized to maximize the speed and the memory usage of the device. In the Wave Digitizer exist a shared memory for all channels for which the Wave Digitizer has been created. At compile time, SciCompiler defines the total size of this memory and the maximum number of channels. At runtime the user can configure if to enable one, two, four channels. The memory will be partitioned in function of the enable channels.</p>
<p>It is designed as following: a packet creator block serializes the enabled channels in a common FIFO and transfer data to the PC.</p>
<p>Every time a start signal is triggered, the timestamp, the hits and user data are captured, and enqueued in the output FIFO.</p>
<p>It is only possible the specify the number of channels (N) starting from the channel 0. So If N = 2, CH0 and CH1 will be dumped, if N = 4, CH0, CH1, CH2, CH3 will be dumped.</p>
<p>Example with four channels:</p>
<ul>
<li>All four channels enabled <img src="dgz01.png" alt="" class="inline"/> <br  />
</li>
<li>Only CH0 and CH1 enabled <img src="dgz02.png" alt="" class="inline"/> <br  />
</li>
</ul>
<p>It is not possible to configre a pre-trigger on the Wave Digitizer. The trigger is always on the first sample. To implement a pre-trigger, it necessary to connect, on each input channel, a delay block with the desired delay (SciCompiler provide fixed and programmable delay block).</p>
<p>The readout can be configure to work in two different mode:</p><ul>
<li>blocking : the <code>SCISDK_ReadData</code> function will block until the buffer is full or the timeout is reached.</li>
<li>non-blocking : the <code>SCISDK_ReadData</code> function will return immediately with the number of bytes read.</li>
</ul>
<p><b>Raw Mode</b> In raw mode the digitizer do not process packet and provide to the user application the raw data. The user application must be able to process the data and extract the information. Raw mode can be useful in order to save at the maximum speed the data to disk. The user application can be a simple script that save the data in a file. A second application can be used to process the data and extract the waveforms.</p>
<h1><a class="anchor" id="autotoc_md84"></a>
Parameters</h1>
<p>The following parameters can be configured:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Acces Mode   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">acq_len   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">maximum number of sample to be transferred per physical FIFO access   </td><td class="markdownTableBodyNone">1024    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">acq_mode   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">select blocking/non-blocking mode   </td><td class="markdownTableBodyNone">blocking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">timeout   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">set the timout in ms in blocking mode   </td><td class="markdownTableBodyNone">100    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">high_performance   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">if true the internal FIFO access lock the bus in priority mode.   </td><td class="markdownTableBodyNone">false    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">check_align_word   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">if true, check the packet alignment   </td><td class="markdownTableBodyNone">false    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">data_processing   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">set data processing mode: raw, decode   </td><td class="markdownTableBodyNone">decode    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">enabledch   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">number of enabled channels.   </td><td class="markdownTableBodyNone">&ndash;all ch&ndash;    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">buffer_type   </td><td class="markdownTableBodyNone">R   </td><td class="markdownTableBodyNone">get buffer type: <a class="el" href="struct_s_c_i_s_d_k___o_s_c_i_l_l_o_s_c_o_p_e___r_a_w___b_u_f_f_e_r.html" title="Oscilloscope raw data type.">SCISDK_OSCILLOSCOPE_RAW_BUFFER</a> or <a class="el" href="struct_s_c_i_s_d_k___o_s_c_i_l_l_o_s_c_o_p_e___d_e_c_o_d_e_d___b_u_f_f_e_r.html" title="Oscilloscope decoded data type.">SCISDK_OSCILLOSCOPE_DECODED_BUFFER</a>   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">channel_count   </td><td class="markdownTableBodyNone">R   </td><td class="markdownTableBodyNone">get buffer the number of channel created with SciCompiler   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">fifo_size   </td><td class="markdownTableBodyNone">R   </td><td class="markdownTableBodyNone">get buffer the total number of samples in the output fifo created with SciCompiler   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">max_ch_samples   </td><td class="markdownTableBodyNone">R   </td><td class="markdownTableBodyNone">return the maximum number of samples per channel can be read   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<h2><a class="anchor" id="autotoc_md85"></a>
Acquisition length</h2>
<p>The <code>acq_len</code> parameter set the number of sample per channels to be read. The maximum value depends by tge number of channels enabled. The maximum value is the total size of the shared memory divided by the number of channels enabled. The driver suggest the maximum value for this parameter reading the <code>max_ch_samples</code> parameter.</p>
<h2><a class="anchor" id="autotoc_md86"></a>
Blocking/Non blocking mode</h2>
<p>In blocking mode the <code>SCISDK_ReadData</code> function will block until the buffer is full or the timeout is reached. In non-blocking mode the <code>SCISDK_ReadData</code> function will return immediately with the number of bytes read. The maximum number of bytes that can be read is the size of the buffer allocated with the function <code>SCISDK_AllocateBuffer</code>. In blocking mode the timeout is set with the <code>timeout</code> parameter. The timeout is expressed in ms. In non-blocking mode the timeout is not used. In both mode, if the buffer is fill with even just a single word the function will return NI_OK. If there is no data at all the read function will return NI_NO_DATA_AVAILABLE.</p>
<h2><a class="anchor" id="autotoc_md87"></a>
Enable channels</h2>
<p>The <code>enabledch</code> parameter is the number of enabled channels. It is only possible the specify the number of channels (N) starting from the channel 0. So If N = 2, CH0 and CH1 will be dumped, if N = 4, CH0, CH1, CH2, CH3 will be dumped. Valid number are from 1 to the maximum number of channels created in SciCompiler.</p>
<h1><a class="anchor" id="autotoc_md88"></a>
Data processing mode</h1>
<p>The <code>data_processing</code> parameter can be used to set the data processing mode. The data processing mode can be set to raw or decode. In raw mode the data are not processed and the user will receive the raw data from the FPGA. In decode mode the data are processed and the user will receive the data as they are pushed in the FPGA fifo, loosing the concept of packet. The custom packet behavior is the same of the list In decode mode the data are analized, divided in packet and it is possible to check the alignment to an aligment word.</p>
<h1><a class="anchor" id="autotoc_md89"></a>
Commands</h1>
<p>The following commands are available:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Parameter    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">start   </td><td class="markdownTableBodyNone">Clear the FIFO and start the acqusition   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">stop   </td><td class="markdownTableBodyNone">Stop the acquisition   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<p>Start will clear the digitizer wave. All digitizer parameter can not be changed while the acquisition is in progress. Stop the digitizer before change any parameter or the property set will be rejected.</p>
<h1><a class="anchor" id="autotoc_md90"></a>
Buffer Allocation</h1>
<p><b>Raw mode</b> In raw mode the buffer must be allocated with the function <code>SCISDK_AllocateBuffer</code>. In raw mode it is mandatory to specify the size of the buffer is FIFO word. The size of the FIFO word is 4 bytes (DWORD). </p><div class="fragment"><div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a>(&lt;path to list&gt;, <a class="code" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82eaf0dd46bc0744f52a1c3a06194e8b115c">T_BUFFER_TYPE_RAW</a>, (<span class="keywordtype">void</span>**)&amp;dgtz_data, &lt;number of word&gt;)</div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_ac3f231d328ae4716a3d5910e00b44d7b"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_AllocateBuffer(char *Path, T_BUFFER_TYPE buffer_type, void **buffer, void *handle)</div><div class="ttdoc">Allocate a buffer to be used to store data from the board for the specific Memory Mapped Componet (os...</div></div>
<div class="ttc" id="ascisdk__defines_8h_html_ae862720a4aac4f0f7472fc81ccc2b82eaf0dd46bc0744f52a1c3a06194e8b115c"><div class="ttname"><a href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82eaf0dd46bc0744f52a1c3a06194e8b115c">T_BUFFER_TYPE_RAW</a></div><div class="ttdeci">@ T_BUFFER_TYPE_RAW</div><div class="ttdef"><b>Definition:</b> scisdk_defines.h:229</div></div>
</div><!-- fragment --><p><b>Decoded data</b> The buffer is allocated using the <code>SCISDK_AllocateBuffer</code> function. The buffer is freed using the <code>SCISDK_FreeBuffer</code> function. There is no argument to be pass to the <code>SCISDK_AllocateBuffer</code> function. The allocator will allocate the buffer with the size for each channe large enough to contain the maximum number of samples per channel in the configuration with a single channel enabled (the worst case).</p>
<div class="fragment"><div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a>(&lt;path to list&gt;, <a class="code" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;dgtz_data)</div>
<div class="ttc" id="ascisdk__defines_8h_html_ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d"><div class="ttname"><a href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a></div><div class="ttdeci">@ T_BUFFER_TYPE_DECODED</div><div class="ttdef"><b>Definition:</b> scisdk_defines.h:230</div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md91"></a>
Output data Format</h1>
<p><b>Raw mode</b> In raw mode the data are not processed and the user will receive the raw data from the FPGA. This mode is useful to implement a simple script that dump the data on file and user will post process data with a second application.</p>
<p>The file dumped from the script above will save the file as a list of events.</p>
<p><img src="dgz03.png" alt="" class="inline"/> <br  />
</p>
<p>The packet structure is the following: | WORD 0 | WORD 1 | WORD 2 | WORD 3 | WORD 4 | WORD 5 | WORD 6 | WORD 7 | | ----&mdash; | ----&mdash; | ----&mdash; | ----&mdash; | ----&mdash; | ----&mdash; | ----&mdash; | ----&mdash; | | HEADER || | CH0_0 | CH1_0 | CH2_0 | CH3_0 | CH0_1 | CH1_1 | CH2_1 | CH3_1 | | CH0_2 | CH1_2 | CH2_2 | CH3_2 | CH0_3 | CH1_3 | CH2_3 | CH3_3 |</p>
<p>The header is composed by the following fields:</p><ul>
<li>Constant word:(32 bits) 0xFFFFFFFF</li>
<li>Timestamp: (64 bits) timestamp</li>
<li>Start counter: (32 bits) packet index</li>
<li>Hits data: (64 bits) every bit represent a channel. If the bit is 1 the channel has triggered. LSB is the first channel</li>
<li>User data: (32 bits) user defined dword data</li>
<li>filler: the size of the filler is indicated in the table below</li>
</ul>
<p>In order to optimize the access speed to the memory, the size of the header must be alligned to the size of the data packet; this is met by adding a padding (filler) to the header. This table indicate the size of the filler</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Number of channels   </th><th class="markdownTableHeadNone">FIFO word size (DW)   </th><th class="markdownTableHeadNone">Filler size    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">16   </td><td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">32   </td><td class="markdownTableBodyNone">16   </td><td class="markdownTableBodyNone">9    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">64   </td><td class="markdownTableBodyNone">32   </td><td class="markdownTableBodyNone">25   </td></tr>
</table>
<p>The channels are ordered as follow: every WORD (16 bit / 2 bytes) there is a channel. All channels are ordered from the first to the last. In the list there is just the data of the enabled channels. After a group of channels another sample for all the channels is stored. So the order is the following:</p>
<div class="fragment"><div class="line">- Samples 0 </div>
<div class="line">    - Channel 0</div>
<div class="line">    - Channel 1</div>
<div class="line">    - Channel 2</div>
<div class="line">    - Channel 3</div>
<div class="line">- Samples 1</div>
<div class="line">    - Channel 0</div>
<div class="line">    - Channel 1</div>
<div class="line">    - Channel 2</div>
<div class="line">    - Channel 3</div>
<div class="line">  an so on</div>
</div><!-- fragment --><p>The data are stored in the following structure:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint32_t magic;</div>
<div class="line">    int32_t *data;</div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        uint32_t buffer_size;</div>
<div class="line">        uint32_t samples;</div>
<div class="line">        uint32_t valid_samples;</div>
<div class="line">        uint32_t channels;</div>
<div class="line">    } info;</div>
<div class="line">}<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___r_a_w___b_u_f_f_e_r.html">SCISDK_DIGITIZER_RAW_BUFFER</a>;</div>
<div class="ttc" id="astruct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___r_a_w___b_u_f_f_e_r_html"><div class="ttname"><a href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___r_a_w___b_u_f_f_e_r.html">SCISDK_DIGITIZER_RAW_BUFFER</a></div><div class="ttdoc">Digitizer raw data type.</div><div class="ttdef"><b>Definition:</b> scisdk_defines.h:138</div></div>
</div><!-- fragment --><p>The <code>magic</code> field is a constant value that can be used to check if the buffer is valid. The <code>data</code> field is a pointer to the buffer. The <code>data</code> contains data in the format above The <code>info</code> field contains the information about the buffer:</p><ul>
<li><code>buffer_size</code>: the size of the buffer in DWORD (4 bytes)</li>
<li><code>samples</code>: the number of samples per channel when all the channels are enabled</li>
<li><code>valid_samples</code>: the number of valid samples in the buffer</li>
<li><code>channels</code>: the number of channels for which the digitizer has been created</li>
</ul>
<p><b>Decoded data</b></p>
<p>In decode mode the user will receive data already decoded. The user has not to care about the packet structure and the alignment. The driver will produce in output an array with the waveform for each channel. The data are stored in the following structure:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint32_t magic;</div>
<div class="line">    int32_t *analog;</div>
<div class="line">    uint64_t hits;</div>
<div class="line">    uint64_t timecode;</div>
<div class="line">    uint32_t counter;</div>
<div class="line">    uint32_t user;</div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        uint32_t samples;</div>
<div class="line">        uint32_t valid_samples;</div>
<div class="line">        uint32_t channels;</div>
<div class="line">        uint32_t enabled_channels;</div>
<div class="line">    } info;</div>
<div class="line">}<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_DIGITIZER_DECODED_BUFFER</a>;</div>
<div class="ttc" id="astruct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r_html"><div class="ttname"><a href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_DIGITIZER_DECODED_BUFFER</a></div><div class="ttdoc">Digitizer decoded data type.</div><div class="ttdef"><b>Definition:</b> scisdk_defines.h:118</div></div>
</div><!-- fragment --><p>The <code>magic</code> field is a constant value that can be used to check if the buffer is valid. The <code>analog</code> field is a pointer to the buffer. The <code>analog</code> contains data in the format above:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">CH   </th><th class="markdownTableHeadNone">CH 0   </th><th class="markdownTableHeadNone">CH 1   </th><th class="markdownTableHeadNone">CH 2   </th><th class="markdownTableHeadNone">CH 3    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Sample   </td><td class="markdownTableBodyNone">0 .... n-th   </td><td class="markdownTableBodyNone">0 .... n-th   </td><td class="markdownTableBodyNone">0 .... n-th   </td><td class="markdownTableBodyNone">0 .... n-th   </td></tr>
</table>
<p>The <code>hits</code> field contains the information about the channels that have triggered. The LSB is the first channel. The <code>timecode</code> field contains the timestamp of the event. The <code>counter</code> field contains the index of the event. The <code>user</code> field contains the user defined dword data. The <code>info</code> field contains the information about the buffer:</p><ul>
<li><code>samples</code>: the maximum number of samples per channel when all the channels are enabled. If less channels are enabled the number of samples will be less channels are enabled this number should be scaled accordingling to the following formula: <code>max_acq_len = samples * (total_channels/enabled_channels)</code></li>
<li><code>valid_samples</code>: the real number of valid samples in the buffer. This number can be up to <code>samples * enabled_channels</code> if just one channel is enabled.</li>
<li><code>channels</code>: the number of channels for which the digitizer has been created.</li>
<li><code>enabled_channels</code>: the number of channels enabled channel in the current acquisition.</li>
</ul>
<h1><a class="anchor" id="autotoc_md92"></a>
Basic Example</h1>
<h2><a class="anchor" id="autotoc_md93"></a>
C</h2>
<div class="fragment"><div class="line"><a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_DIGITIZER_DECODED_BUFFER</a> *ddb;</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a612babf059fa19eaac91fae6da160f85">SCISDK_AllocateBufferSize</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, <a class="code" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;ddb, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;</span>, <span class="stringliteral">&quot;decode&quot;</span>, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a0f722da8b5e19540555298e0806bb45f">SCISDK_SetParameterInteger</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;</span>, 1, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;</span>, 1000, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;</span>, 100, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.start&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line"><span class="keywordflow">while</span> (1) {</div>
<div class="line">    <span class="keywordtype">int</span> ret = ReadData(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, (<span class="keywordtype">void</span> *)ddb, _sdk);</div>
<div class="line">    <span class="keywordflow">if</span> (ret == <a class="code" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>) {</div>
<div class="line">        <span class="comment">// process the data </span></div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="a_n_i_error_code_8h_html_ae749d3c5e8d435a8bc05e47792d996d8"><div class="ttname"><a href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a></div><div class="ttdeci">#define NI_OK</div><div class="ttdef"><b>Definition:</b> NIErrorCode.h:8</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a00407547516aa0d9a26f273423366be3"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_SetParameterString(char *Path, char *value, void *handle)</div><div class="ttdoc">Set the value of a parameter for the specific SciCompiler Memory Mapped Component or route the value ...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a0f722da8b5e19540555298e0806bb45f"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a0f722da8b5e19540555298e0806bb45f">SCISDK_SetParameterInteger</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_SetParameterInteger(char *Path, int value, void *handle)</div><div class="ttdoc">Set the value of a parameter for the specific SciCompiler Memory Mapped Component or route the value ...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a16a7364c71d331be2da443c61f7a25f3"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_ExecuteCommand(char *Path, char *value, void *handle)</div><div class="ttdoc">Execute a command for the specific Memory Mapped Component device driver/endpoint....</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a612babf059fa19eaac91fae6da160f85"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a612babf059fa19eaac91fae6da160f85">SCISDK_AllocateBufferSize</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_AllocateBufferSize(char *Path, T_BUFFER_TYPE buffer_type, void **buffer, void *handle, int size)</div><div class="ttdoc">Allocate a buffer to be used to store data from the board for the specific Memory Mapped Componet (li...</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md94"></a>
C++</h2>
<div class="fragment"><div class="line">{c++}</div>
<div class="line">   SCISDK_DIGITIZER_DECODED_BUFFER *ddb;</div>
<div class="line">   sdk.AllocateBufferSize(&quot;board0:/MMCComponents/Digitizer_0&quot;, T_BUFFER_TYPE_DECODED, (void**)&amp;ddb);</div>
<div class="line">   sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;, &quot;decode&quot;);</div>
<div class="line">   sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;, 1);</div>
<div class="line">   sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;, 1000);</div>
<div class="line">   sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;, 100);</div>
<div class="line">   sdk.ExecuteCommand(&quot;board0:/MMCComponents/Digitizer_0.start&quot;, &quot;&quot;);</div>
<div class="line"> </div>
<div class="line">   while (1) {</div>
<div class="line">       int ret = sdk.ReadData(&quot;board0:/MMCComponents/Digitizer_0&quot;, (void *)ddb);</div>
<div class="line">       if (ret == NI_OK) {</div>
<div class="line">           // process the data </div>
<div class="line">       }</div>
<div class="line">   }</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md95"></a>
Python</h2>
<div class="fragment"><div class="line">res, ddb = sdk.AllocateBufferSize(&quot;board0:/MMCComponents/Digitizer_0&quot;, 1)</div>
<div class="line">if res != 0:</div>
<div class="line">    print(&quot;Error allocating buffer&quot;)</div>
<div class="line">    exit(-1)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;, &quot;decode&quot;)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;, 1)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;, 1000)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;, 100)</div>
<div class="line">sdk.ExecuteCommand(&quot;board0:/MMCComponents/Digitizer_0.start&quot;, &quot;&quot;)</div>
<div class="line"> </div>
<div class="line">while True:</div>
<div class="line">    ret, ddb = sdk.ReadData(&quot;board0:/MMCComponents/Digitizer_0&quot;, ddb)</div>
<div class="line">    if ret == NI_OK:</div>
<div class="line">        # process the data </div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md96"></a>
CSharp</h2>
<div class="fragment"><div class="line">SCISDK_DIGITIZER_DECODED_BUFFER ddb = new SCISDK_DIGITIZER_DECODED_BUFFER();</div>
<div class="line">sdk.AllocateBufferSize(&quot;board0:/MMCComponents/Digitizer_0&quot;, T_BUFFER_TYPE_DECODED, ref ddb);</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;, &quot;decode&quot;);</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;, 1);</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;, 1000);</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;, 100);</div>
<div class="line">sdk.ExecuteCommand(&quot;board0:/MMCComponents/Digitizer_0.start&quot;, &quot;&quot;);</div>
<div class="line"> </div>
<div class="line">while (true) {</div>
<div class="line">    int ret = sdk.ReadData(&quot;board0:/MMCComponents/Digitizer_0&quot;, ref ddb);</div>
<div class="line">    if (ret == NI_OK) {</div>
<div class="line">        // process the data </div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md97"></a>
VB.NET</h2>
<div class="fragment"><div class="line">Dim ddb As SCISDK_DIGITIZER_DECODED_BUFFER</div>
<div class="line">sdk.AllocateBufferSize(&quot;board0:/MMCComponents/Digitizer_0&quot;, 1, ddb)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;, &quot;decode&quot;)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;, 1)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;, 1000)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;, 100)</div>
<div class="line">sdk.ExecuteCommand(&quot;board0:/MMCComponents/Digitizer_0.start&quot;, &quot;&quot;)</div>
<div class="line"> </div>
<div class="line">While True</div>
<div class="line">    Dim ret As Integer = sdk.ReadData(&quot;board0:/MMCComponents/Digitizer_0&quot;, ddb)</div>
<div class="line">    If ret = NI_OK Then</div>
<div class="line">        &#39; process the data </div>
<div class="line">    End If</div>
<div class="line">End While</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md98"></a>
JAVA</h2>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> enabled_channels = 1;</div>
<div class="line"><span class="keywordtype">int</span> res = sdk.SetParameterString(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;</span>, <span class="stringliteral">&quot;decode&quot;</span>);</div>
<div class="line">res = sdk.SetParameterInteger(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;</span>, enabled_channels);</div>
<div class="line">res = sdk.SetParameterInteger(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;</span>, 8000);</div>
<div class="line">res = sdk.SetParameterString(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>);</div>
<div class="line">res = sdk.SetParameterInteger(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;</span>, 2000);</div>
<div class="line">res = sdk.ExecuteCommand(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.start&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// allocate buffer</span></div>
<div class="line">Ref&lt;DigitizerDecodedBuffer&gt; buf = <span class="keyword">new</span> Ref&lt;&gt;(<span class="keyword">new</span> DigitizerDecodedBuffer());</div>
<div class="line">res = sdk.AllocateBuffer(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, buf);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(res == 0){</div>
<div class="line">    <span class="comment">// read data</span></div>
<div class="line">    res = sdk.ReadData(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, buf);</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md99"></a>
Additional Examples</h1>
<h2><a class="anchor" id="autotoc_md100"></a>
Read decoded data and write on file, on channel per column</h2>
<div class="fragment"><div class="line"><a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_DIGITIZER_DECODED_BUFFER</a> *ddb;</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a612babf059fa19eaac91fae6da160f85">SCISDK_AllocateBufferSize</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, <a class="code" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;ddb, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;</span>, <span class="stringliteral">&quot;decode&quot;</span>, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a0f722da8b5e19540555298e0806bb45f">SCISDK_SetParameterInteger</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;</span>, 4, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;</span>, 1000, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;</span>, 100, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.start&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line"><span class="keywordflow">while</span> (1) {</div>
<div class="line">    <span class="keywordtype">int</span> ret = ReadData(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, (<span class="keywordtype">void</span> *)ddb, _sdk);</div>
<div class="line">    <span class="keywordflow">if</span> (ret == <a class="code" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>) {</div>
<div class="line">        std::ofstream out(<span class="stringliteral">&quot;c:/temp/output.txt&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ddb-&gt;<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#a72edcc499e46a6969f22c0a5cb1e8872">info</a>.<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#acf44f3ec061091932d6eaf99f9b94de3">valid_samples</a>; i++) {</div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; ddb-&gt;<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#a72edcc499e46a6969f22c0a5cb1e8872">info</a>.<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#af7ed75122e199161f9b3877fe18da59f">enabled_channels</a>;j++){</div>
<div class="line">                out &lt;&lt; ddb-&gt;<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#aab2723dc65566d7499fc48d2b6d1091b">analog</a>[i+(j*</div>
<div class="line">                    ddb-&gt;<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#a72edcc499e46a6969f22c0a5cb1e8872">info</a>.<a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#acf44f3ec061091932d6eaf99f9b94de3">valid_samples</a>)] &lt;&lt; <span class="stringliteral">&quot;   &quot;</span> &lt;&lt; endl;</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        out.close();</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="astruct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r_html_a72edcc499e46a6969f22c0a5cb1e8872"><div class="ttname"><a href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#a72edcc499e46a6969f22c0a5cb1e8872">SCISDK_DIGITIZER_DECODED_BUFFER::info</a></div><div class="ttdeci">struct SCISDK_DIGITIZER_DECODED_BUFFER::@4 info</div></div>
<div class="ttc" id="astruct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r_html_aab2723dc65566d7499fc48d2b6d1091b"><div class="ttname"><a href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#aab2723dc65566d7499fc48d2b6d1091b">SCISDK_DIGITIZER_DECODED_BUFFER::analog</a></div><div class="ttdeci">int32_t * analog</div><div class="ttdef"><b>Definition:</b> scisdk_defines.h:120</div></div>
<div class="ttc" id="astruct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r_html_acf44f3ec061091932d6eaf99f9b94de3"><div class="ttname"><a href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#acf44f3ec061091932d6eaf99f9b94de3">SCISDK_DIGITIZER_DECODED_BUFFER::valid_samples</a></div><div class="ttdeci">uint32_t valid_samples</div><div class="ttdef"><b>Definition:</b> scisdk_defines.h:127</div></div>
<div class="ttc" id="astruct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r_html_af7ed75122e199161f9b3877fe18da59f"><div class="ttname"><a href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___d_e_c_o_d_e_d___b_u_f_f_e_r.html#af7ed75122e199161f9b3877fe18da59f">SCISDK_DIGITIZER_DECODED_BUFFER::enabled_channels</a></div><div class="ttdeci">uint32_t enabled_channels</div><div class="ttdef"><b>Definition:</b> scisdk_defines.h:129</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md101"></a>
Read raw data and write on file</h2>
<div class="fragment"><div class="line"><span class="comment">// DIGITIZER raw</span></div>
<div class="line"><a class="code" href="struct_s_c_i_s_d_k___d_i_g_i_t_i_z_e_r___r_a_w___b_u_f_f_e_r.html">SCISDK_DIGITIZER_RAW_BUFFER</a> *ddb;</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a612babf059fa19eaac91fae6da160f85">SCISDK_AllocateBufferSize</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, <a class="code" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82eaf0dd46bc0744f52a1c3a06194e8b115c">T_BUFFER_TYPE_RAW</a>, (<span class="keywordtype">void</span>**)&amp;ddb, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.data_processing&quot;</span>, <span class="stringliteral">&quot;raw&quot;</span>, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a0f722da8b5e19540555298e0806bb45f">SCISDK_SetParameterInteger</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.enabledch&quot;</span>, 4, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.acq_len&quot;</span>, 1000, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.timeout&quot;</span>, 100, _sdk);</div>
<div class="line"><a class="code" href="_sci_s_d_k___d_l_l_8h.html#a16a7364c71d331be2da443c61f7a25f3">SCISDK_ExecuteCommand</a>(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0.start&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">while</span> (1) {</div>
<div class="line">    <span class="keywordtype">int</span> ret = sdk.ReadData(<span class="stringliteral">&quot;board0:/MMCComponents/Digitizer_0&quot;</span>, (<span class="keywordtype">void</span> *)ddb);</div>
<div class="line">    <span class="keywordflow">if</span> (ret == <a class="code" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>) {</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ddb-&gt;info.valid_samples; i++) {</div>
<div class="line">            cout &lt;&lt; std::hex  &lt;&lt; ddb-&gt;data[i] &lt;&lt; endl;</div>
<div class="line">        }   </div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
