<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<!-- BEGIN opengraph metadata -->
<meta property="og:title" content="Doxygen Awesome" />
<meta property="og:image" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta property="og:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<meta property="og:url" content="https://jothepro.github.io/doxygen-awesome-css/" />
<!-- END opengraph metadata -->
<!-- BEGIN twitter metadata -->
<meta name="twitter:image:src" content="https://repository-images.githubusercontent.com/348492097/4f16df80-88fb-11eb-9d31-4015ff22c452" />
<meta name="twitter:title" content="Doxygen Awesome" />
<meta name="twitter:description" content="Custom CSS theme for doxygen html-documentation with lots of customization parameters." />
<!-- END twitter metadata -->
<title>SciSDK Library: FFT (Power Spectrum) driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" type="image/svg+xml" href="logo.drawio.svg"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- https://bryce.io/gitlab-corners/ -->
<style>
    .gitlab-corner-wrapper {
        overflow: hidden;
        width: 100px;
        height: 100px;
        position: absolute;
        top: 0;
        right: 0
    }
    .gitlab-corner {
        position: absolute;
        top: -16px;
        right: -50px;
        transform: rotate(45deg);
        background: #548;
        border: 44px solid #548;
        border-bottom: none;
        border-top: #548 solid 16px
    }
    .gitlab-corner svg {
        width: 60px;
        height: 60px;
        margin-bottom: -4px
    }
    .cls-1 {
        fill: #fc6d26
    }
    .cls-2 {
        fill: #e24329
    }
    .cls-3 {
        fill: #fca326
    }
    .gitlab-corner:hover .cls-1 {
        animation: cycle .6s
    }
    .gitlab-corner:hover .cls-2 {
        animation: cycleMid .6s
    }
    .gitlab-corner:hover .cls-3 {
        animation: cycleEnd .6s
    }
    @keyframes cycle {
        100%,
        15%,
        60% {
            fill: #fc6d26
        }
        30%,
        75% {
            fill: #e24329
        }
        45%,
        90% {
            fill: #fca326
        }
    }
    @keyframes cycleMid {
        100%,
        15%,
        60% {
            fill: #e24329
        }
        30%,
        75% {
            fill: #fca326
        }
        45%,
        90% {
            fill: #fc6d26
        }
    }
    @keyframes cycleEnd {
        100%,
        15%,
        60% {
            fill: #fca326
        }
        30%,
        75% {
            fill: #fc6d26
        }
        45%,
        90% {
            fill: #e24329
        }
    }
    @media (max-width:500px) {
        .gitlab-corner:hover .cls-1,
        .gitlab-corner:hover .cls-2,
        .gitlab-corner:hover .cls-3 {
            animation: none
        }
        .gitlab-corner .cls-1 {
            animation: cycle .6s
        }
        .gitlab-corner .cls-2 {
            animation: cycleMid .6s
        }
        .gitlab-corner .cls-3 {
            animation: cycleEnd .6s
        }
    }
</style>
<div class="gitlab-corner-wrapper"><a href="https://gitlab.sci-compiler.com/sdk/sci-sdk" class="gitlab-corner"
        aria-label="View source on GitLab"><svg id="logo_art" data-name="logo art" xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 586 559">
            <g id="g44">
                <path id="path46" class="cls-1"
                    d="M461.17,301.83l-18.91-58.12L404.84,128.43a6.47,6.47,0,0,0-12.27,0L355.15,243.64H230.82L193.4,128.43a6.46,6.46,0,0,0-12.26,0L143.78,243.64l-18.91,58.19a12.88,12.88,0,0,0,4.66,14.39L293,435,456.44,316.22a12.9,12.9,0,0,0,4.73-14.39" />
            </g>
            <g id="g48">
                <path id="path50" class="cls-2" d="M293,434.91h0l62.16-191.28H230.87L293,434.91Z" />
            </g>
            <g id="g56">
                <path id="path58" class="cls-1" d="M293,434.91,230.82,243.63h-87L293,434.91Z" />
            </g>
            <g id="g64">
                <path id="path66" class="cls-3"
                    d="M143.75,243.69h0l-18.91,58.12a12.88,12.88,0,0,0,4.66,14.39L293,435,143.75,243.69Z" />
            </g>
            <g id="g72">
                <path id="path74" class="cls-2"
                    d="M143.78,243.69h87.11L193.4,128.49a6.47,6.47,0,0,0-12.27,0l-37.35,115.2Z" />
            </g>
            <g id="g76">
                <path id="path78" class="cls-1" d="M293,434.91l62.16-191.28H442.3L293,434.91Z" />
            </g>
            <g id="g80">
                <path id="path82" class="cls-3"
                    d="M442.24,243.69h0l18.91,58.12a12.85,12.85,0,0,1-4.66,14.39L293,434.91l149.2-191.22Z" />
            </g>
            <g id="g84">
                <path id="path86" class="cls-2"
                    d="M442.28,243.69h-87.1l37.42-115.2a6.46,6.46,0,0,1,12.26,0l37.42,115.2Z" />
            </g>
        </svg></a></div>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sci-compiler-logo.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SciSDK Library
   </div>
   <div id="projectbrief">SDK for Sci-Compiler projects</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_docs_2fft.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">FFT (Power Spectrum) driver</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md210"></a> The FFT (power spectrum) allows to interface with the <em>FFT monitor</em> and acquire magnitude and phase of the FFT in order to be able to calculate the power spectrcum.</p>
<p>In practical use, the FFT Monitor module is connected to the FFT module. The real and imaginary data calculated by the FFT is transferred to the PC. This driver, when configured as DECODED, internally converts the real/imaginary data into magnitude and phase. When configured as raw, it is possible to access the real and imaginary data directly.</p>
<p>The acquisition can be triggered by the first sample signal generated by the FFT module.</p>
<h1><a class="anchor" id="autotoc_md211"></a>
Parameters</h1>
<p>The following parameters can be configured:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter   </th><th class="markdownTableHeadNone">Acces Mode   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Default value    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">decimator   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">set x-axis decimation factor   </td><td class="markdownTableBodyNone">0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">auto_arm   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">set 1 to enable the auto arm feature   </td><td class="markdownTableBodyNone">1    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">data_processing   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">set data processing mode: raw, decode   </td><td class="markdownTableBodyNone">decode    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">acq_mode   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">set data processing mode: blocking, non-blocking   </td><td class="markdownTableBodyNone">blocking    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">timeout   </td><td class="markdownTableBodyNone">R/W   </td><td class="markdownTableBodyNone">set timeout for blocking acquisition in ms   </td><td class="markdownTableBodyNone">5000    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">buffer_type   </td><td class="markdownTableBodyNone">R   </td><td class="markdownTableBodyNone">get buffer type: <a class="el" href="struct_s_c_i_s_d_k___o_s_c_i_l_l_o_s_c_o_p_e___r_a_w___b_u_f_f_e_r.html" title="Oscilloscope raw data type.">SCISDK_OSCILLOSCOPE_RAW_BUFFER</a> or <a class="el" href="struct_s_c_i_s_d_k___o_s_c_i_l_l_o_s_c_o_p_e___d_e_c_o_d_e_d___b_u_f_f_e_r.html" title="Oscilloscope decoded data type.">SCISDK_OSCILLOSCOPE_DECODED_BUFFER</a>   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<h2><a class="anchor" id="autotoc_md212"></a>
Decimation</h2>
<p>Decimate the FFT in hardware. The DC component (first sample) is always preserved, than if the decimation is for example 1, the frequency resolution is 1/2 of the sampling frequency: the frequency 1 will be skipped, the 2 preserved and so on.</p>
<h2><a class="anchor" id="autotoc_md213"></a>
Acquisition Modes</h2>
<p>Following acquisition modes are available:</p><ul>
<li><b> blocking </b> mode waits for the acquisition to complete before returning from the ReadData function. The <b>timeout</b> can be set with the timeout parameter.</li>
<li><b> non-blocking </b> mode returns immediately from the ReadData function. If trigger does not occur within the timeout, the function returns NI_TIMEOUT</li>
</ul>
<h2><a class="anchor" id="autotoc_md214"></a>
Auto Arm</h2>
<p>The auto arm feature can be enabled with the auto_arm parameter. When enabled, the acquisition is automatically armed by the ReadData function.</p>
<h2><a class="anchor" id="autotoc_md215"></a>
Data Processing</h2>
<p>The data processing mode can be set with the data_processing parameter. Following values are available:</p><ul>
<li><b> raw </b> returns the raw data from the oscilloscope. The oscilloscope buffer is not decoded indeed the data is returned as it is stored in the oscilloscope memory.</li>
<li><b> decode </b> returns decoded data from the oscilloscope. The oscilloscpe buffer is decoded internally to the DLL</li>
</ul>
<h1><a class="anchor" id="autotoc_md216"></a>
Commands</h1>
<p>The following commands are available:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command   </th><th class="markdownTableHeadNone">Description   </th><th class="markdownTableHeadNone">Parameter    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">arm   </td><td class="markdownTableBodyNone">if auto-arm is not enabled, arm the trigger of the oscillocope   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">reset_read_valid_flag   </td><td class="markdownTableBodyNone">reset the data ready flag   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<h1><a class="anchor" id="autotoc_md217"></a>
Output data Format</h1>
<h2><a class="anchor" id="autotoc_md218"></a>
Raw Data</h2>
<p>The data output structure is the following: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint32_t magic;</div>
<div class="line">    uint32_t *data;</div>
<div class="line">    uint64_t timecode;</div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        uint32_t buffer_size;</div>
<div class="line">        uint32_t samples;</div>
<div class="line">        uint32_t channels;</div>
<div class="line">    } info;</div>
<div class="line">}<a class="code hl_struct" href="struct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r.html">SCISDK_FFT_RAW_BUFFER</a>;</div>
<div class="ttc" id="astruct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r_html"><div class="ttname"><a href="struct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r.html">SCISDK_FFT_RAW_BUFFER</a></div><div class="ttdoc">FFT monitor raw data structure.</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:304</div></div>
</div><!-- fragment --><p> <code>magic</code> : magic number to identify the buffer type. It is set to SCISDK_OSCILLOSCOPE_RAW_BUFFER_MAGIC <code>data</code> : it's the array of the raw data. The data is stored in the fft memory as it is. Every "sample" is composed by two 32 bit words. The first word contains the real part of the sample, the second word contains the imaginary part of the sample.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Raw Memory    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Frequency 0 - RE    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frequency 0 - IM    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Frequency 1 - RE    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frequency 1 - IM    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">...    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Frequency N - RE    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Frequency N - IM   </td></tr>
</table>
<p>The Sci-Compiler standard FFT module works in fixed point indeed the number should be considered as integer value (cast to in32_t). Power spectrum can be calculated as; sqrt(pow(re,2)+pow(im,2)) while the phase as: atan(im/re)</p>
<p><code>info</code> : it contains information about the oscilloscope buffer. The fields are:</p><ul>
<li><code>buffer_size</code> : the size of the buffer in DWORD</li>
<li><code>samples</code> : number of samples per channel</li>
<li><code>channels</code> : the number of channels</li>
</ul>
<h2><a class="anchor" id="autotoc_md219"></a>
Decoded</h2>
<p>Data is returned in the user buffer in the following format:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>{</div>
<div class="line">    uint32_t magic;</div>
<div class="line">    <span class="keywordtype">double</span> *mag;</div>
<div class="line">    <span class="keywordtype">double</span> *ph;</div>
<div class="line">    uint64_t timecode;</div>
<div class="line">    <span class="keyword">struct </span>{</div>
<div class="line">        uint32_t samples;</div>
<div class="line">        uint32_t channels;</div>
<div class="line">    } info;</div>
<div class="line">}<a class="code hl_struct" href="struct_s_c_i_s_d_k___f_f_t___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_FFT_DECODED_BUFFER</a>;</div>
<div class="ttc" id="astruct_s_c_i_s_d_k___f_f_t___d_e_c_o_d_e_d___b_u_f_f_e_r_html"><div class="ttname"><a href="struct_s_c_i_s_d_k___f_f_t___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_FFT_DECODED_BUFFER</a></div><div class="ttdoc">FFT monitor decoded data structure.</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:288</div></div>
</div><!-- fragment --><p><code>magic</code> : magic number to identify the buffer type. It is set to SCISDK_OSCILLOSCOPE_DECODE_BUFFER_MAGIC <code>mag</code> : phase value calculated with forumale sqrt(pow(re,2)+pow(im,2)) <code>ph</code> : phase value calculated with forumale atan(im/re) <code>timecode</code> : timecode of the acquisition</p>
<p><code>info</code> : it contains information about the oscilloscope buffer. The fields are:</p><ul>
<li><code>samples</code> : the number of samples per channel</li>
<li><code>channels</code> : the number of channels</li>
</ul>
<h1><a class="anchor" id="autotoc_md220"></a>
Basic Examples</h1>
<h2><a class="anchor" id="autotoc_md221"></a>
C</h2>
<div class="fragment"><div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.data_processing&quot;</span>, <span class="stringliteral">&quot;decode&quot;</span>, _sdk);</div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="struct_s_c_i_s_d_k___f_f_t___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_FFT_DECODED_BUFFER</a> *ob;</div>
<div class="line"><span class="keywordtype">int</span> res = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, <a class="code hl_enumvalue" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;ob, _sdk);</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> (res != <a class="code hl_define" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>) {</div>
<div class="line">    printf(<span class="stringliteral">&quot;Error allocating buffer\n&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, (<span class="keywordtype">void</span> *)ob, _sdk);</div>
<div class="ttc" id="a_n_i_error_code_8h_html_ae749d3c5e8d435a8bc05e47792d996d8"><div class="ttname"><a href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a></div><div class="ttdeci">#define NI_OK</div><div class="ttdef"><b>Definition</b> NIErrorCode.h:8</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_a00407547516aa0d9a26f273423366be3"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_SetParameterString(char *Path, char *value, void *handle)</div><div class="ttdoc">Set the value of a parameter for the specific Sci-Compiler Memory Mapped Component or route the value...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_ac3f231d328ae4716a3d5910e00b44d7b"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_AllocateBuffer(char *Path, T_BUFFER_TYPE buffer_type, void **buffer, void *handle)</div><div class="ttdoc">Allocate a buffer to be used to store data from the board for the specific Memory Mapped Componet (os...</div></div>
<div class="ttc" id="a_sci_s_d_k___d_l_l_8h_html_aeae6abf2d2a9a72799a64a3aa2d528c1"><div class="ttname"><a href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a></div><div class="ttdeci">SCISDK_DLL_API int SCISDK_ReadData(char *Path, void *buffer, void *handle)</div><div class="ttdoc">Read data from the board for the specific Memory Mapped Componet (oscilloscope, spectrum,...</div></div>
<div class="ttc" id="ascisdk__defines_8h_html_ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d"><div class="ttname"><a href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a></div><div class="ttdeci">@ T_BUFFER_TYPE_DECODED</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:230</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md222"></a>
C++</h2>
<div class="fragment"><div class="line"> ++</div>
<div class="line">sdk-&gt;SetParameter(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.data_processing&quot;</span>, <span class="stringliteral">&quot;decode&quot;</span>);</div>
<div class="line">sdk-&gt;SetParameter(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="struct_s_c_i_s_d_k___f_f_t___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_FFT_DECODED_BUFFER</a> *ob;</div>
<div class="line"><span class="keywordtype">int</span> res = sdk-&gt;AllocateBuffer(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, <a class="code hl_enumvalue" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;ob);</div>
<div class="line"><span class="keywordflow">if</span> (res != <a class="code hl_define" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>) {</div>
<div class="line">    cout &lt;&lt; <span class="stringliteral">&quot;Error allocating buffer&quot;</span> &lt;&lt; endl;</div>
<div class="line">    <span class="keywordflow">return</span> -1;</div>
<div class="line">}</div>
<div class="line">sdk-&gt;ReadData(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, (<span class="keywordtype">void</span> *)ob);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md223"></a>
Python</h2>
<div class="fragment"><div class="line">sdk.SetParameterInteger(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.decimator&quot;</span>, 0)</div>
<div class="line">sdk.SetParameterString(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>)</div>
<div class="line"> </div>
<div class="line">res, buf = sdk.AllocateBuffer(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>)</div>
<div class="line">res, buf = sdk.ReadData(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, buf)</div>
<div class="line"><span class="keywordflow">if</span> (res == 0) {</div>
<div class="line">    <span class="comment"># do something with the buffer</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md224"></a>
C Sharp</h2>
<div class="fragment"><div class="line">sdk.SetParameter(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.data_processing&quot;</span>,<span class="stringliteral">&quot;decode&quot;</span>);</div>
<div class="line">sdk.SetParameter(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// allocate buffer</span></div>
<div class="line">SciSDKFFTDecodedBuffer buffer;</div>
<div class="line">buffer = <span class="keyword">new</span> SciSDKOscilloscopeDecodedBuffer();</div>
<div class="line">sdk.AllocateBuffer(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, BufferType.BUFFER_TYPE_DECODED, ref buffer);</div>
<div class="line"><span class="keywordflow">if</span> (sdk.ReadData(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, ref buffer) == 0)</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// do something with the buffer</span></div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md225"></a>
VB.NET</h2>
<div class="fragment"><div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/FFT_0.data_processing&quot;,&quot;decode&quot;)</div>
<div class="line">sdk.SetParameter(&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;, &quot;blocking&quot;)</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">&#39;allocate buffer</div>
<div class="line">dim buffer as SciSDKFFTDecodedBuffer</div>
<div class="line">sdk.AllocateBuffer(&quot;board0:/MMCComponents/FFT_0&quot;, BufferType.BUFFER_TYPE_DECODED, buffer)</div>
<div class="line">if (sdk.ReadData(&quot;board0:/MMCComponents/FFT_0&quot;, buffer) == 0)</div>
<div class="line">{</div>
<div class="line">    &#39;do something with the buffer</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md226"></a>
JAVA</h2>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> res = sdk.SetParameter(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.data_processing&quot;</span>,<span class="stringliteral">&quot;decode&quot;</span>);</div>
<div class="line">sdk.SetParameter(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// allocate buffer</span></div>
<div class="line">Ref&lt;FFTDecodedBuffer&gt; buf = <span class="keyword">new</span> Ref&lt;&gt;(<span class="keyword">new</span> FFTDecodedBuffer());</div>
<div class="line">res = sdk.AllocateBuffer(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, buf);</div>
<div class="line"><span class="keywordflow">if</span>(res == 0) {</div>
<div class="line"> </div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md227"></a>
Labview</h2>
<div class="image">
<img src="fft.PNG" alt=""/>
</div>
    <p><em>You can find the labview file for this example <a href="https://github.com/NuclearInstruments/SCISDK/tree/master/examples/components/LabView">here</a></em></p>
<h1><a class="anchor" id="autotoc_md228"></a>
Additional Examples</h1>
<h2><a class="anchor" id="autotoc_md229"></a>
Non blocking mode</h2>
<div class="fragment"><div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.data_processing&quot;</span>, <span class="stringliteral">&quot;decode&quot;</span>, _sdk);</div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;non-blocking&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="struct_s_c_i_s_d_k___f_f_t___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_FFT_DECODED_BUFFER</a> *ob;</div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, <a class="code hl_enumvalue" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;ob, _sdk);</div>
<div class="line"> </div>
<div class="line"><span class="comment">// poll ReadData until it returns 0 for a maximum of 10000ms in non-blocking mode</span></div>
<div class="line"><span class="keywordtype">int</span> res = <a class="code hl_define" href="_n_i_error_code_8h.html#ab44d3b4fb5f18b8063b2e8e7299096f9">NI_TIMEOUT</a>;</div>
<div class="line"><span class="keywordtype">int</span> timeout = 10000;</div>
<div class="line"><span class="keywordflow">while</span> ((res == <a class="code hl_define" href="_n_i_error_code_8h.html#ab44d3b4fb5f18b8063b2e8e7299096f9">NI_TIMEOUT</a>) &amp;&amp; (timeout &gt; 0))</div>
<div class="line">{</div>
<div class="line">    res = <a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, (<span class="keywordtype">void</span> *)ob, _sdk);</div>
<div class="line">    timeout -= 10;</div>
<div class="line">    </div>
<div class="line">    <span class="comment">/*</span></div>
<div class="line"><span class="comment">     * do something else</span></div>
<div class="line"><span class="comment">     */</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (res == <a class="code hl_define" href="_n_i_error_code_8h.html#ae749d3c5e8d435a8bc05e47792d996d8">NI_OK</a>) {</div>
<div class="line">        </div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        Sleep(10);</div>
<div class="line">    }</div>
<div class="line">} </div>
<div class="ttc" id="a_n_i_error_code_8h_html_ab44d3b4fb5f18b8063b2e8e7299096f9"><div class="ttname"><a href="_n_i_error_code_8h.html#ab44d3b4fb5f18b8063b2e8e7299096f9">NI_TIMEOUT</a></div><div class="ttdeci">#define NI_TIMEOUT</div><div class="ttdef"><b>Definition</b> NIErrorCode.h:42</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md230"></a>
Processing decoded data and store in a file</h2>
<p>The following example shows how to process the decoded data and store it in a file. The data is stored in a CSV file with the following format: Phase, Magnitude </p><div class="fragment"><div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.data_processing&quot;</span>, <span class="stringliteral">&quot;decode&quot;</span>, _sdk);</div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="struct_s_c_i_s_d_k___f_f_t___d_e_c_o_d_e_d___b_u_f_f_e_r.html">SCISDK_FFT_DECODED_BUFFER</a> *ob;</div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, <a class="code hl_enumvalue" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82ea64ff37ce78751f02ab09b50494a3c14d">T_BUFFER_TYPE_DECODED</a>, (<span class="keywordtype">void</span>**)&amp;ob, _sdk);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, (<span class="keywordtype">void</span> *)ob, _sdk);</div>
<div class="line"> </div>
<div class="line">FILE *fp = fopen(<span class="stringliteral">&quot;fft.csv&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line">fprintf(fp, <span class="stringliteral">&quot;Phase, Magnitude\n&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ob-&gt;num_samples; i++) {</div>
<div class="line">    fprintf(fp, <span class="stringliteral">&quot;%f, %f\n&quot;</span>, ob-&gt;phase[i], ob-&gt;magnitude[i]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">fclose(fp);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md231"></a>
Processing raw data and store in a file</h2>
<p>The following example shows how to process the raw data and store it in a file. The data is stored in a CSV file with the following format: real, imaginary </p><div class="fragment"><div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.data_processing&quot;</span>, <span class="stringliteral">&quot;raw&quot;</span>, _sdk);</div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#a00407547516aa0d9a26f273423366be3">SCISDK_SetParameterString</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0.acq_mode&quot;</span>, <span class="stringliteral">&quot;blocking&quot;</span>, _sdk);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_struct" href="struct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r.html">SCISDK_FFT_RAW_BUFFER</a> *ob;</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#ac3f231d328ae4716a3d5910e00b44d7b">SCISDK_AllocateBuffer</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, <a class="code hl_enumvalue" href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82eaf0dd46bc0744f52a1c3a06194e8b115c">T_BUFFER_TYPE_RAW</a>, (<span class="keywordtype">void</span>**)&amp;ob, _sdk);</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="_sci_s_d_k___d_l_l_8h.html#aeae6abf2d2a9a72799a64a3aa2d528c1">SCISDK_ReadData</a>(<span class="stringliteral">&quot;board0:/MMCComponents/FFT_0&quot;</span>, (<span class="keywordtype">void</span> *)ob, _sdk);</div>
<div class="line"> </div>
<div class="line">FILE *fp = fopen(<span class="stringliteral">&quot;fft.csv&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>);</div>
<div class="line"> </div>
<div class="line">fprintf(fp, <span class="stringliteral">&quot;real, imaginary\n&quot;</span>);</div>
<div class="line"><span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; ob-&gt;num_samples; i++) {</div>
<div class="line">    fprintf(fp, <span class="stringliteral">&quot;%f, %f\n&quot;</span>, ob-&gt;<a class="code hl_variable" href="struct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r.html#a69a951127c5e90d3e04792bcbd3ee948">data</a>[i*2], ob-&gt;<a class="code hl_variable" href="struct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r.html#a69a951127c5e90d3e04792bcbd3ee948">data</a>[i*2+1]);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">fclose(fp);</div>
<div class="ttc" id="ascisdk__defines_8h_html_ae862720a4aac4f0f7472fc81ccc2b82eaf0dd46bc0744f52a1c3a06194e8b115c"><div class="ttname"><a href="scisdk__defines_8h.html#ae862720a4aac4f0f7472fc81ccc2b82eaf0dd46bc0744f52a1c3a06194e8b115c">T_BUFFER_TYPE_RAW</a></div><div class="ttdeci">@ T_BUFFER_TYPE_RAW</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:229</div></div>
<div class="ttc" id="astruct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r_html_a69a951127c5e90d3e04792bcbd3ee948"><div class="ttname"><a href="struct_s_c_i_s_d_k___f_f_t___r_a_w___b_u_f_f_e_r.html#a69a951127c5e90d3e04792bcbd3ee948">SCISDK_FFT_RAW_BUFFER::data</a></div><div class="ttdeci">uint32_t * data</div><div class="ttdef"><b>Definition</b> scisdk_defines.h:306</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
